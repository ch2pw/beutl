<UserControl x:Class="Beutl.Views.Editors.NodeTreeModelNodeItemView"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:icons="using:FluentIcons.FluentAvalonia"
             xmlns:lang="using:Beutl.Language"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModel="using:Beutl.ViewModels.Editors"
             d:DesignHeight="450"
             d:DesignWidth="800"
             x:DataType="viewModel:NodeTreeModelNodeItemViewModel"
             mc:Ignorable="d">
    <Grid RowDefinitions="Auto,Auto">
        <Grid Margin="8,0,0,0" ColumnDefinitions="*,Auto">
            <ToggleButton x:Name="expandToggle"
                          Content="{Binding NodeName.Value}"
                          IsChecked="{Binding IsExpanded.Value}"
                          Theme="{StaticResource ListEditorMiniExpanderToggleButton}">
                <ToggleButton.Tag>
                    <icons:SymbolIcon Margin="0,1,0,0" Symbol="ChevronUpDown" />
                </ToggleButton.Tag>
                <ToggleButton.ContextMenu>
                    <ContextMenu>
                        <MenuItem Click="Remove_Click" Header="{x:Static lang:Strings.Remove}">
                            <MenuItem.Icon>
                                <icons:SymbolIcon Symbol="Delete" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Click="RenameClick" Header="{x:Static lang:Strings.Rename}">
                            <MenuItem.Icon>
                                <icons:SymbolIcon Symbol="Rename" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </ToggleButton.ContextMenu>
            </ToggleButton>

            <Button Grid.Column="1"
                    Margin="4,0,8,0"
                    Padding="0"
                    Classes="size-24x24"
                    Click="Remove_Click"
                    Theme="{StaticResource TransparentButton}">
                <icons:SymbolIcon Symbol="Delete" />
            </Button>
        </Grid>

        <Panel x:Name="content"
               Grid.Row="1"
               Margin="16,0,0,0">
            <ItemsControl ItemsSource="{Binding Properties}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ContentControl Content="{Binding Converter={StaticResource ViewModelToViewConverter}}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Panel>
    </Grid>
</UserControl>
