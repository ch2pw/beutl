<UserControl x:Class="Beutl.Views.Tutorial.TutorialOverlay"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:lang="using:Beutl.Language"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             d:DesignHeight="450"
             d:DesignWidth="800"
             mc:Ignorable="d">

    <Panel>
        <!-- 半透明暗幕（ターゲット要素の矩形を切り抜き） -->
        <Border x:Name="OverlayBackdrop"
                Background="#80000000"
                IsHitTestVisible="True" />

        <!-- TeachingTip をホストするためのキャンバス -->
        <Canvas x:Name="TipCanvas" IsHitTestVisible="False">
            <!-- ハイライト枠 -->
            <Border x:Name="HighlightBorder"
                    BorderBrush="{DynamicResource AccentFillColorDefaultBrush}"
                    BorderThickness="2"
                    CornerRadius="4"
                    IsVisible="False" />
        </Canvas>

        <!-- TeachingTip コンテンツ（吹き出し） -->
        <Border x:Name="TipContainer"
                MaxWidth="400"
                Padding="16"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="{DynamicResource SolidBackgroundFillColorBaseBrush}"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8"
                IsHitTestVisible="True"
                BoxShadow="0 8 32 0 #40000000">
            <StackPanel Spacing="12">
                <!-- タイトル -->
                <TextBlock x:Name="TipTitle"
                           FontWeight="SemiBold"
                           Theme="{StaticResource SubtitleTextBlockStyle}" />

                <!-- コンテンツ -->
                <TextBlock x:Name="TipContent"
                           TextWrapping="Wrap" />

                <!-- ステップカウンター + ナビゲーション -->
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock x:Name="StepCounter"
                               VerticalAlignment="Center"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />

                    <StackPanel Grid.Column="1"
                                Orientation="Horizontal"
                                Spacing="8">
                        <Button x:Name="SkipButton"
                                Click="OnSkipClick"
                                Content="{x:Static lang:Strings.TutorialSkip}"
                                Theme="{StaticResource TransparentButton}" />
                        <Button x:Name="PreviousButton"
                                Click="OnPreviousClick"
                                Content="{x:Static lang:Strings.TutorialPrevious}" />
                        <Button x:Name="NextButton"
                                Click="OnNextClick"
                                Content="{x:Static lang:Strings.TutorialNext}"
                                Theme="{StaticResource AccentButtonStyle}" />
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>
    </Panel>

</UserControl>
